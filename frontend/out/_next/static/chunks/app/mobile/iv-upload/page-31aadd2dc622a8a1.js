(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[815],{78189:function(e,t,s){Promise.resolve().then(s.bind(s,14599))},22252:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(39763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},99376:function(e,t,s){"use strict";var l=s(35475);s.o(l,"useRouter")&&s.d(t,{useRouter:function(){return l.useRouter}}),s.o(l,"useSearchParams")&&s.d(t,{useSearchParams:function(){return l.useSearchParams}})},14599:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var l=s(57437),a=s(2265),n=s(22252),r=s(30401),c=s(53581),i=s(33145),d=s(99376);function o(){let e=(0,d.useSearchParams)().get("token"),[t,s]=(0,a.useState)(null),[o,u]=(0,a.useState)(null),[x,m]=(0,a.useState)(!1),[f,h]=(0,a.useState)(!1),[b,j]=(0,a.useState)(null),p=async()=>{if(!t||!e)return;m(!0),j(null);let s=new FormData;s.append("file",t);try{if((await fetch("".concat("http://127.0.0.1:8000","/api/v1/upload/image?token=").concat(e),{method:"POST",body:s})).ok)h(!0);else throw Error("Upload failed")}catch(e){j("사진 전송에 실패했습니다. 다시 시도해 주세요.")}finally{m(!1)}};return e?f?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-teal-50 p-4 text-center",children:[(0,l.jsx)("div",{className:"w-20 h-20 bg-teal-100 rounded-full flex items-center justify-center mb-6 animate-in zoom-in",children:(0,l.jsx)(r.Z,{size:40,className:"text-teal-600"})}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-teal-800 mb-2",children:"전송 완료!"}),(0,l.jsx)("p",{className:"text-teal-600",children:"스테이션으로 사진이 전송되었습니다."}),(0,l.jsx)("p",{className:"text-sm text-teal-500 mt-8",children:"창을 닫으셔도 됩니다."})]}):(0,l.jsx)("div",{className:"min-h-screen bg-slate-100 p-4 flex flex-col items-center justify-center",children:(0,l.jsxs)("div",{className:"w-full max-w-sm bg-white rounded-2xl shadow-xl overflow-hidden",children:[(0,l.jsxs)("div",{className:"p-6 bg-slate-800 text-white text-center",children:[(0,l.jsx)("h1",{className:"text-xl font-bold",children:"IV 모니터 사진 업로드"}),(0,l.jsx)("p",{className:"text-sm text-slate-300 mt-1",children:"수액 조절기 값을 촬영해 주세요"})]}),(0,l.jsxs)("div",{className:"p-6 flex flex-col gap-6",children:[(0,l.jsxs)("div",{className:"aspect-square bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl flex items-center justify-center overflow-hidden relative group",children:[o?(0,l.jsx)(i.default,{src:o,alt:"Preview",fill:!0,className:"object-cover"}):(0,l.jsxs)("div",{className:"text-center text-slate-400",children:[(0,l.jsx)(c.Z,{size:48,className:"mx-auto mb-2 opacity-50"}),(0,l.jsx)("span",{className:"text-sm",children:"사진을 선택하거나 촬영하세요"})]}),(0,l.jsx)("label",{className:"absolute inset-0 cursor-pointer flex items-center justify-center bg-black/0 group-hover:bg-black/10 transition-colors",children:(0,l.jsx)("input",{type:"file",accept:"image/*",capture:"environment",onChange:e=>{var t;let l=null===(t=e.target.files)||void 0===t?void 0:t[0];if(l){if(!l.type.startsWith("image/")){j("이미지 파일만 업로드 가능합니다."),s(null),u(null);return}if(l.size>10485760){j("파일 크기는 10MB를 초과할 수 없습니다."),s(null),u(null);return}s(l),u(URL.createObjectURL(l)),j(null)}},className:"hidden"})})]}),b&&(0,l.jsxs)("div",{className:"flex items-center gap-2 text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:[(0,l.jsx)(n.Z,{size:16}),b]}),(0,l.jsx)("button",{onClick:p,disabled:!t||x,className:"w-full py-4 rounded-xl font-bold text-lg shadow-lg transition-all ".concat(t?x?"bg-slate-400 text-white cursor-wait":"bg-teal-600 text-white hover:bg-teal-700 active:scale-95":"bg-slate-200 text-slate-400 cursor-not-allowed"),children:x?"전송 중...":"스테이션으로 전송"})]})]})}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-red-50 p-4 text-center",children:[(0,l.jsx)(n.Z,{size:40,className:"text-red-600 mb-4"}),(0,l.jsx)("h1",{className:"text-xl font-bold text-red-800",children:"잘못된 접근입니다."}),(0,l.jsx)("p",{className:"text-red-600",children:"유효한 토큰이 포함된 QR코드를 다시 스캔해 주세요."})]})}function u(){return(0,l.jsx)(a.Suspense,{fallback:(0,l.jsx)("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center",children:"Loading..."}),children:(0,l.jsx)(o,{})})}}},function(e){e.O(0,[38,971,117,744],function(){return e(e.s=78189)}),_N_E=e.O()}]);