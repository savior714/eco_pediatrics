(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[358],{4687:function(e,t,s){Promise.resolve().then(s.bind(s,8365))},8365:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var a=s(3827),l=s(4090),r=s(6587),i=s(1278),n=s(8333),d=s(9479),o=s(3356),c=s(2983),x=s(166),m=s(8061),h=s(3031),u=s(143);function f(e){let{data:t}=e;return(0,a.jsxs)(u.Z,{className:"w-full h-80 relative overflow-hidden shadow-lg border-teal-100",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2 px-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:"체온 차트"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"최근 24시간"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("span",{className:"text-3xl font-bold text-status-danger drop-shadow-sm",children:[t.length>0?t[t.length-1].temperature:"--","\xb0C"]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1 mt-1",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-status-success animate-pulse"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 font-medium",children:"실시간"})]})]})]}),(0,a.jsx)(r.h,{width:"100%",height:"75%",children:(0,a.jsxs)(i.w,{data:t,margin:{top:10,right:10,left:-20,bottom:0},children:[(0,a.jsx)(n.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),(0,a.jsx)(d.z,{y1:36.5,y2:37.5,fill:"#bbf7d0",fillOpacity:.3}),(0,a.jsx)(o.K,{dataKey:"time",stroke:"#94a3b8",fontSize:11,tickLine:!1,axisLine:!1,tick:{dy:10}}),(0,a.jsx)(c.B,{domain:[35,40],stroke:"#94a3b8",fontSize:11,tickLine:!1,axisLine:!1}),(0,a.jsx)(x.u,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)",backgroundColor:"white",padding:"8px 12px"},itemStyle:{color:"#0f172a",fontWeight:600}}),(0,a.jsx)(m.x,{type:"monotone",dataKey:"temperature",stroke:"#14b8a6",strokeWidth:3,dot:{r:4,fill:"#fff",stroke:"#14b8a6",strokeWidth:2},activeDot:{r:6,fill:"#14b8a6",stroke:"#fff",strokeWidth:2}}),t.map((e,t)=>e.has_medication&&(0,a.jsx)(h.q,{x:e.time,y:e.temperature,r:5,fill:"#ef4444",stroke:"#fee2e2",strokeWidth:2},t))]})})]})}var b=s(6409),p=s(9335),j=s(7336);function g(e){let{photoUrl:t,dropsPerMin:s,lastChecked:l}=e;return(0,a.jsxs)(u.Z,{className:"flex flex-col gap-4 bg-blue-50 border-blue-100 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-slate-700 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"p-1.5 bg-white rounded-lg shadow-sm",children:(0,a.jsx)(b.Z,{className:"text-blue-500",size:18})}),"수액 안전 모니터링"]}),l&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-xs bg-white text-blue-600 px-3 py-1.5 rounded-full border border-blue-100 font-semibold shadow-sm",children:[(0,a.jsx)(p.Z,{size:12}),"간호사 확인 완료"]})]}),(0,a.jsx)("div",{className:"w-full aspect-video bg-white rounded-2xl border-2 border-dashed border-blue-200 flex flex-col items-center justify-center relative overflow-hidden group",children:t?(0,a.jsx)("img",{src:t,alt:"IV Controller",className:"object-cover w-full h-full opacity-90"}):(0,a.jsxs)("div",{className:"text-center p-4",children:[(0,a.jsx)(j.Z,{className:"text-blue-200 mx-auto mb-2",size:32}),(0,a.jsx)("p",{className:"text-blue-300 text-sm font-medium",children:"수액 조절기 사진 확인"})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-blue-100",children:[(0,a.jsx)("span",{className:"text-slate-500 text-sm font-medium",children:"현재 주입 속도"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-slate-800",children:s||0}),(0,a.jsx)("span",{className:"text-slate-500 font-medium",children:"gtt"})]})]})]})}var N=s(948),v=s(9475);function w(e){let{params:t}=e,{token:s}=t,{vitals:r,isConnected:i}=function(e){let[t,s]=(0,l.useState)([]),[a,r]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{if(!e)return;(async()=>{try{let t=await fetch("http://localhost:8000/api/v1/dashboard/".concat(e));if(!t.ok){403===t.status&&(window.location.href="/403");return}let a=(await t.json()).vitals.map(e=>({time:new Date(e.recorded_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),temperature:e.temperature,has_medication:e.has_medication,recorded_at:e.recorded_at})).reverse();s(a)}catch(e){console.error("Failed to fetch initial vitals",e)}})();let t=new WebSocket("ws://localhost:8000/ws/".concat(e));return t.onopen=()=>{console.log("Connected to Vitals WS"),r(!0)},t.onmessage=e=>{let t=JSON.parse(e.data);if("NEW_VITAL"===t.type){let e=t.data,a={time:new Date(e.recorded_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),temperature:e.temperature,has_medication:e.has_medication,recorded_at:e.recorded_at};s(e=>[...e,a])}},t.onclose=()=>{console.log("Disconnected from Vitals WS"),r(!1)},()=>{t.close()}},[e]),{vitals:t,isConnected:a}}(s);return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 pb-20",children:[(0,a.jsx)("header",{className:"bg-white text-slate-800 p-6 rounded-b-3xl shadow-sm relative z-10",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold mb-1 text-slate-900",children:["이*원 ",(0,a.jsx)("span",{className:"text-lg font-medium text-slate-500",children:"환자"})]}),(0,a.jsx)("p",{className:"text-slate-500 font-medium",children:"201호 | 입원 3일차"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-slate-100 px-3 py-1.5 rounded-full",title:i?"실시간 연결됨":"연결 끊김",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(i?"bg-green-500 animate-pulse":"bg-red-400")}),(0,a.jsx)("span",{className:"text-xs text-slate-500 font-medium",children:i?"Live":"Offline"})]})]})}),(0,a.jsxs)("main",{className:"px-4 -mt-4 relative z-20 flex flex-col gap-6",children:[(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)(f,{data:r})}),(0,a.jsxs)("section",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{className:"flex items-center justify-center gap-3 h-16 bg-white rounded-2xl shadow-sm border border-slate-100 active:scale-95 transition-all hover:bg-orange-50 group",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center text-orange-500 group-hover:bg-orange-200 transition-colors",children:(0,a.jsx)(N.Z,{size:20})}),(0,a.jsx)("span",{className:"font-bold text-slate-700",children:"식단 신청"})]}),(0,a.jsxs)("button",{className:"flex items-center justify-center gap-3 h-16 bg-white rounded-2xl shadow-sm border border-slate-100 active:scale-95 transition-all hover:bg-blue-50 group",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-500 group-hover:bg-blue-200 transition-colors",children:(0,a.jsx)(v.Z,{size:20})}),(0,a.jsx)("span",{className:"font-bold text-slate-700",children:"서류 신청"})]})]}),(0,a.jsx)(g,{photoUrl:"",dropsPerMin:20,lastChecked:"오후 2:00"}),(0,a.jsx)("p",{className:"text-center text-xs text-slate-400 -mt-4 mb-2",children:"* 라인 확보 및 수액 속도 확인 완료"}),(0,a.jsxs)("section",{className:"bg-white rounded-2xl p-5 shadow-sm border border-slate-100",children:[(0,a.jsxs)("h3",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCE2"})," 병동 공지사항"]}),(0,a.jsx)("ul",{className:"space-y-3",children:(0,a.jsxs)("li",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-xl",children:[(0,a.jsx)("span",{className:"bg-teal-100 text-teal-700 text-xs font-bold px-2 py-0.5 rounded",children:"회진"}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium text-slate-700",children:"오전 회진 시간 안내"}),(0,a.jsx)("p",{className:"text-slate-500 text-xs mt-0.5",children:"교수님 회진은 09:30 ~ 10:30 사이 예정입니다."})]})]})})]})]})]})}},143:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(3827);s(4090);var l=s(3167),r=s(1367);function i(e){let{children:t,className:s,...i}=e;return(0,a.jsx)("div",{className:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,l.W)(t))}("bg-white rounded-xl shadow-sm border border-slate-100 p-4",s),...i,children:t})}}},function(e){e.O(0,[537,647,971,69,744],function(){return e(e.s=4687)}),_N_E=e.O()}]);